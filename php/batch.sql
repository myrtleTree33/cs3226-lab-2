DROP DATABASE a0108165;
CREATE DATABASE a0108165;
USE a0108165;

-- create graphs --
CREATE TABLE Graphs(
  id INTEGER PRIMARY KEY NOT NULL,
  N INTEGER NOT NULL,
  M INTEGER NOT NULL
);

-- Stores the optimal highest matched edges --
CREATE TABLE Edges(
  id INTEGER AUTO_INCREMENT PRIMARY KEY,
  graph_id INTEGER NOT NULL,
  FOREIGN KEY (graph_id) REFERENCES Graphs(id),
  leftNode INTEGER NOT NULL,
  rightNode INTEGER NOT NULL,
  weight INTEGER NOT NULL
);

-- create table for user
CREATE TABLE User(
  user_id VARCHAR(20) PRIMARY KEY,
  hashed_password VARCHAR(255) NOT NULL,
  role INTEGER NOT NULL
);

-- Stores the user-generated current highest matched edges --
CREATE TABLE Stats(
  graph_id INTEGER NOT NULL,
  FOREIGN KEY (graph_id) REFERENCES Graphs(id),
  num_match INTEGER NOT NULL,
  match_score INTEGER NOT NULL,
  user_id  VARCHAR(20) NOT NULL DEFAULT ''
);



-- populate --
INSERT INTO Graphs VALUES(0,3,5);
INSERT INTO Graphs VALUES(1,3,5);
INSERT INTO Graphs VALUES(2,3,5);
INSERT INTO Graphs VALUES(3,3,5);

-- graph 0
INSERT INTO Edges VALUES(DEFAULT,0,0,1,2);
INSERT INTO Edges VALUES(DEFAULT,0,0,3,50);
INSERT INTO Edges VALUES(DEFAULT,0,1,1,66);
INSERT INTO Edges VALUES(DEFAULT,0,1,4,95);
INSERT INTO Edges VALUES(DEFAULT,0,2,0,90);
INSERT INTO Edges VALUES(DEFAULT,0,2,1,86);

-- graph 1
INSERT INTO Edges VALUES(DEFAULT,1,0,1,2);
INSERT INTO Edges VALUES(DEFAULT,1,0,2,19);
INSERT INTO Edges VALUES(DEFAULT,1,0,3,5);
INSERT INTO Edges VALUES(DEFAULT,1,1,3,100);
INSERT INTO Edges VALUES(DEFAULT,1,1,4,64);
INSERT INTO Edges VALUES(DEFAULT,1,2,2,41);
INSERT INTO Edges VALUES(DEFAULT,1,2,3,8);

-- graph 2
INSERT INTO Edges VALUES(DEFAULT,2,0,1,2);
INSERT INTO Edges VALUES(DEFAULT,2,0,2,22);
INSERT INTO Edges VALUES(DEFAULT,2,0,3,90);
INSERT INTO Edges VALUES(DEFAULT,2,1,0,71);
INSERT INTO Edges VALUES(DEFAULT,2,1,3,74);
INSERT INTO Edges VALUES(DEFAULT,2,2,3,16);
INSERT INTO Edges VALUES(DEFAULT,2,2,4,78);

-- graph 3
INSERT INTO Edges VALUES(DEFAULT,3,0,1,2);
INSERT INTO Edges VALUES(DEFAULT,3,0,1,10);
INSERT INTO Edges VALUES(DEFAULT,3,0,4,26);
INSERT INTO Edges VALUES(DEFAULT,3,1,0,98);
INSERT INTO Edges VALUES(DEFAULT,3,1,1,30);
INSERT INTO Edges VALUES(DEFAULT,3,2,3,45);
INSERT INTO Edges VALUES(DEFAULT,3,2,4,51);

-- stats
INSERT INTO Stats VALUES(0,0,0, '');
INSERT INTO Stats VALUES(1,0,0, '');
INSERT INTO Stats VALUES(2,0,0, '');
INSERT INTO Stats VALUES(3,0,0, '');



-- automated the rest
INSERT INTO Graphs VALUES(4,7,10);
INSERT INTO Edges VALUES(DEFAULT,4,0,1,35);
INSERT INTO Edges VALUES(DEFAULT,4,0,2,25);
INSERT INTO Edges VALUES(DEFAULT,4,1,6,42);
INSERT INTO Edges VALUES(DEFAULT,4,1,7,21);
INSERT INTO Edges VALUES(DEFAULT,4,2,7,89);
INSERT INTO Edges VALUES(DEFAULT,4,2,8,98);
INSERT INTO Edges VALUES(DEFAULT,4,2,9,25);
INSERT INTO Edges VALUES(DEFAULT,4,3,1,37);
INSERT INTO Edges VALUES(DEFAULT,4,3,4,39);
INSERT INTO Edges VALUES(DEFAULT,4,4,3,78);
INSERT INTO Edges VALUES(DEFAULT,4,4,6,45);
INSERT INTO Edges VALUES(DEFAULT,4,5,1,66);
INSERT INTO Edges VALUES(DEFAULT,4,5,3,100);
INSERT INTO Edges VALUES(DEFAULT,4,5,7,52);
INSERT INTO Edges VALUES(DEFAULT,4,6,6,30);
INSERT INTO Edges VALUES(DEFAULT,4,6,7,22);
INSERT INTO Stats VALUES(4,0,0, '');

INSERT INTO Graphs VALUES(5,2,4);
INSERT INTO Edges VALUES(DEFAULT,5,0,0,96);
INSERT INTO Edges VALUES(DEFAULT,5,0,2,61);
INSERT INTO Edges VALUES(DEFAULT,5,1,1,52);
INSERT INTO Edges VALUES(DEFAULT,5,1,2,19);
INSERT INTO Stats VALUES(5,0,0, '');

INSERT INTO Graphs VALUES(6,5,7);
INSERT INTO Edges VALUES(DEFAULT,6,0,0,62);
INSERT INTO Edges VALUES(DEFAULT,6,0,5,79);
INSERT INTO Edges VALUES(DEFAULT,6,1,2,38);
INSERT INTO Edges VALUES(DEFAULT,6,1,3,92);
INSERT INTO Edges VALUES(DEFAULT,6,2,0,66);
INSERT INTO Edges VALUES(DEFAULT,6,2,4,46);
INSERT INTO Edges VALUES(DEFAULT,6,3,3,89);
INSERT INTO Edges VALUES(DEFAULT,6,3,4,31);
INSERT INTO Edges VALUES(DEFAULT,6,4,2,50);
INSERT INTO Edges VALUES(DEFAULT,6,4,5,71);
INSERT INTO Stats VALUES(6,0,0, '');

INSERT INTO Graphs VALUES(7,3,8);
INSERT INTO Edges VALUES(DEFAULT,7,0,1,87);
INSERT INTO Edges VALUES(DEFAULT,7,0,3,100);
INSERT INTO Edges VALUES(DEFAULT,7,0,5,6);
INSERT INTO Edges VALUES(DEFAULT,7,1,3,22);
INSERT INTO Edges VALUES(DEFAULT,7,1,4,22);
INSERT INTO Edges VALUES(DEFAULT,7,2,2,83);
INSERT INTO Edges VALUES(DEFAULT,7,2,5,46);
INSERT INTO Edges VALUES(DEFAULT,7,2,6,9);
INSERT INTO Stats VALUES(7,0,0, '');

INSERT INTO Graphs VALUES(8,5,8);
INSERT INTO Edges VALUES(DEFAULT,8,0,3,69);
INSERT INTO Edges VALUES(DEFAULT,8,0,5,16);
INSERT INTO Edges VALUES(DEFAULT,8,0,6,85);
INSERT INTO Edges VALUES(DEFAULT,8,1,1,24);
INSERT INTO Edges VALUES(DEFAULT,8,1,4,34);
INSERT INTO Edges VALUES(DEFAULT,8,1,5,92);
INSERT INTO Edges VALUES(DEFAULT,8,2,3,32);
INSERT INTO Edges VALUES(DEFAULT,8,2,6,58);
INSERT INTO Edges VALUES(DEFAULT,8,3,1,36);
INSERT INTO Edges VALUES(DEFAULT,8,3,4,93);
INSERT INTO Edges VALUES(DEFAULT,8,3,5,32);
INSERT INTO Edges VALUES(DEFAULT,8,4,0,87);
INSERT INTO Edges VALUES(DEFAULT,8,4,3,6);
INSERT INTO Edges VALUES(DEFAULT,8,4,7,85);
INSERT INTO Stats VALUES(8,0,0, '');
